{"version":3,"sources":["webpack:///src/components/details/details.vue","webpack:///./src/components/details/details.vue?d61d","webpack:///./src/components/details/details.vue"],"names":["details","data","showAnswerDialog","showPopup","content","from","cate","bestAnswer","normalAnser","type","popTitle","popContent","components","HeaderMain","header","Scroll","scroll_scroll","created","this","question_id","$route","query","id","_reqDetail","_reqWatchNum","computed","popupTitle","popupLable","methods","_checkToken","_this","localStorage","getItem","dialog","confirm","title","message","confirmButtonText","then","$router","push","catch","console","log","handleAnswerAndReplyCancel","handleSubmitModify","Object","toast","_reqModifyQues","_reqModifyAnswer","handleAdoptClick","index","item","_this2","answer_id","_reqAdopy","handlePopupBack","handleModifyQues","description","handleModifyAnswer","itemIndex","handleAnswerClick","isReply","handleAnswerAndReplyConfirm","_reqReply","_reqAnswer","handleReplyClick","_this3","api","res","common","answer","length","forEach","state","_this4","success","_this5","_this6","_this7","_this8","details_details","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","show-cancel-button","closeOnClickOverlay","on","cancel","model","value","callback","$$v","expression","label","rows","placeholder","_v","position","overlay","path","back","border","clearable","autosize","_e","href","click","_s","nickname","create_time","cate_name","nowUserId","user_id","$event","preventDefault","src","avatar","alt","answer_time","_l","key","replys","reply","reply_content","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/7.fb71edb14a65dd2ed392.js","sourcesContent":["<template>\r\n  <div class=\"details\">\r\n    <van-dialog\r\n      class=\"answer-dialog\"\r\n      v-model=\"showAnswerDialog\"\r\n      show-cancel-button\r\n      closeOnClickOverlay\r\n      @cancel='handleAnswerAndReplyCancel'\r\n      @confirm=\"handleAnswerAndReplyConfirm\">\r\n      <van-field\r\n        label=\"内容\"\r\n        type=\"textarea\"\r\n        rows=\"1\"\r\n        v-model=\"content\"\r\n        placeholder=\"请输入\"\r\n      />\r\n    </van-dialog>\r\n    <van-popup class=\"popup\" v-model=\"showPopup\" position=\"right\" :overlay=\"false\">\r\n      <header-main path='path' @back='handlePopupBack' :title=\"popupTitle\"></header-main>\r\n      <br>\r\n      <van-cell-group :border='false'>\r\n        <van-field\r\n          v-if=\"type === 'question'\"\r\n          label=\"标题\"\r\n          clearable\r\n          type=\"textarea\"\r\n          v-model=\"popTitle\"\r\n          rows=\"2\"\r\n          autosize\r\n          :border='false'\r\n        />\r\n        <div v-if=\"type === 'question'\" class=\"border\"></div>\r\n        <van-field\r\n          :label=\"popupLable\"\r\n          clearable\r\n          type=\"textarea\"\r\n          v-model=\"popContent\"\r\n          rows=\"3\"\r\n          :border='false'\r\n          autosize\r\n        />\r\n        <div class=\"border\"></div>\r\n      </van-cell-group>\r\n      <a href=\"javascript:;\" @click=\"handleSubmitModify\" class=\"submit-btn\">提交修改</a>\r\n    </van-popup>\r\n    <header-main title='问题详情'></header-main>\r\n    <div class=\"scroll-box\">\r\n      <scroll>\r\n        <br>\r\n        <!-- 问题部分 -->\r\n        <div class=\"ques-data\">\r\n          <h2>{{ details.title }}</h2>\r\n          <div class=\"border\"></div>\r\n          <div class=\"data\">\r\n            <span>{{ details.from.nickname }} 提问于 {{ details.create_time }}</span>\r\n            <span>{{ details.cate.cate_name }}</span>\r\n          </div>\r\n          <div class=\"border\"></div>\r\n          <p>问题补充：{{ details.description }}</p>\r\n          <a v-if=\"details.nowUserId === details.user_id\" href=\"javascript:;\" @click.prevent=\"handleModifyQues('question', details.title, details.description)\" class=\"submit-btn\">修改问题</a>\r\n          <a v-else href=\"javascript:;\" @click.prevent='handleAnswerClick' class=\"submit-btn\">我来回答</a>\r\n        </div>\r\n        <!-- 最佳答案部分 -->\r\n        <div v-if=\"bestAnswer.state\" class=\"best-answer\">\r\n          <div class=\"title\">最佳答案</div>\r\n          <div class=\"contents\">{{ bestAnswer.content }}</div>\r\n          <div class=\"infor\">\r\n            <img :src=\"bestAnswer.from[0].avatar\" alt=\"\">\r\n            <div>\r\n              <span>回答者：{{ bestAnswer.from[0].nickname }}</span>\r\n              <span>回答时间：{{ bestAnswer.answer_time }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"border\"></div>\r\n        <!-- 其它答案部分 -->\r\n        <div class=\"other-answer\" v-for=\"(item, index) in normalAnser\" :key=\"index\">\r\n          <div class=\"title\">\r\n            <span>其它回答</span>\r\n            <div>\r\n              <span v-if=\"details.nowUserId === item.user_id\" @click=\"handleModifyAnswer('answer', item.answer_id, item.content, index)\">修改</span>\r\n              <span v-if=\"details.nowUserId === details.user_id && !bestAnswer.state\" @click=\"handleAdoptClick(index, item)\">采纳</span>\r\n              <span @click=\"handleReplyClick(item.answer_id)\">回复</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"contents\">{{ item.content }}</div>\r\n          <div class=\"infor\">\r\n            <img :src=\"item.from[0].avatar\" alt=\"\">\r\n            <span>{{ item.from[0].nickname }}</span>\r\n            <span>|</span>\r\n            <span>{{ item.answer_time }}</span>\r\n          </div>\r\n          <div v-if=\"item.replys.length\" class=\"reply\">\r\n            <p v-for=\"(reply, index) in item.replys\" :key=\"index\">{{ index + 1 }}# {{ reply.user_id }} 回复说：{{ reply.reply_content }}</p>\r\n          </div>\r\n        </div>\r\n        <br>\r\n        <br>\r\n        <br>\r\n      </scroll>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport HeaderMain from \"@/base/header/header\";\r\nimport Scroll from \"@/base/scroll/scroll\";\r\nimport { Toast, Dialog } from \"vant\";\r\nimport { handleResponse } from \"@/assets/js/common\";\r\nimport {\r\n  GET_ASK_DETAIL,\r\n  POST_ASK_ANSWER,\r\n  POST_ASK_MODIFYQUES,\r\n  POST_ASK_MODIFYANSWER,\r\n  GET_ASK_ADOPT,\r\n  POST_ASK_REPLY,\r\n  POST_ASK_WATCHNUM\r\n} from \"@/api\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showAnswerDialog: false,\r\n      showPopup: false,\r\n      content: \"\",\r\n      details: {\r\n        from: {},\r\n        cate: {}\r\n      },\r\n      bestAnswer: {},\r\n      normalAnser: [],\r\n      type: \"\",\r\n      popTitle: \"\",\r\n      popContent: \"\"\r\n    };\r\n  },\r\n  components: {\r\n    HeaderMain,\r\n    Scroll\r\n  },\r\n  created() {\r\n    this.question_id = this.$route.query.id;\r\n    this._reqDetail();\r\n    this._reqWatchNum();\r\n  },\r\n  computed: {\r\n    popupTitle() {\r\n      if (this.type === \"answer\") {\r\n        return \"修改回答\";\r\n      }\r\n      if (this.type === \"question\") {\r\n        return \"修改问题\";\r\n      }\r\n    },\r\n    popupLable() {\r\n      if (this.type === \"answer\") {\r\n        return \"答案\";\r\n      }\r\n      if (this.type === \"question\") {\r\n        return \"描述\";\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    _checkToken () {\r\n      let token = localStorage.getItem(\"token\");\r\n      if (!token) {\r\n        Dialog.confirm({\r\n          title: \"温馨提示\",\r\n          message: \"登录后才能回答问题哦，老铁。\",\r\n          confirmButtonText: \"去登陆\"\r\n        })\r\n        .then(() => {\r\n          this.$router.push(\"/login\");\r\n        })\r\n        .catch(() => {\r\n          console.log(\"已关闭\");\r\n        });\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    handleAnswerAndReplyCancel () {\r\n      this.content = ''\r\n    },\r\n    handleSubmitModify() {\r\n      if (this.type === \"question\") {\r\n        if (!this.popupTitle) return Toast(\"请输入标题\");\r\n        this._reqModifyQues();\r\n      }\r\n      if (this.type === \"answer\") {\r\n        if (!this.popContent) return Toast(\"请输入答案\");\r\n        this._reqModifyAnswer();\r\n      }\r\n    },\r\n    handleAdoptClick(index, item) {\r\n      Dialog.confirm({\r\n        title: \"温馨提示\",\r\n        message: \"确认采纳该答案为最佳答案吗？\"\r\n      })\r\n        .then(() => {\r\n          this.answer_id = item.answer_id;\r\n          this.index = index;\r\n          this.item = item;\r\n          this._reqAdopy();\r\n        })\r\n        .catch(() => {\r\n          Toast(\"已取消\");\r\n        });\r\n    },\r\n    handlePopupBack() {\r\n      this.showPopup = false;\r\n    },\r\n    // 修改问题和答案\r\n    handleModifyQues(type, title, description) {\r\n      this.type = type;\r\n      this.popTitle = title;\r\n      this.popContent = description;\r\n      this.showPopup = true;\r\n    },\r\n    // 修改答案\r\n    handleModifyAnswer(type, answer_id, content, index) {\r\n      this.type = type;\r\n      this.answer_id = answer_id;\r\n      this.popContent = content;\r\n      this.itemIndex = index;\r\n      this.showPopup = true;\r\n    },\r\n    // 我来回答 按钮\r\n    handleAnswerClick() {\r\n      let flag = this._checkToken()\r\n      if (!flag) {\r\n        return \r\n      }\r\n      this.showAnswerDialog = true;\r\n      this.isReply = false\r\n    },\r\n    handleAnswerAndReplyConfirm() {\r\n      if (!this.content) {\r\n        this.showAnswerDialog = true;\r\n        return Toast(\"请输入内容\");\r\n      }\r\n      if (this.isReply) {\r\n        this._reqReply();\r\n      } else {\r\n        this._reqAnswer();\r\n      }\r\n    },\r\n    // 回复问题\r\n    handleReplyClick(id) {\r\n      let flag = this._checkToken()\r\n      if (!flag) {\r\n        return \r\n      }\r\n      this.answer_id = id;\r\n      this.showAnswerDialog = true;\r\n      this.isReply = true;\r\n    },\r\n    _reqDetail() {\r\n      GET_ASK_DETAIL(this.question_id).then(res => {\r\n        handleResponse(res, () => {\r\n          this.details = res.data;\r\n          // 遍历回答数组\r\n          this.normalAnser = [];\r\n          if (res.data.answer.length) {\r\n            res.data.answer.forEach(item => {\r\n              if (item.state === 1) {\r\n                this.bestAnswer = item;\r\n              }\r\n              if (item.state === 0) {\r\n                this.normalAnser.push(item);\r\n              }\r\n            });\r\n          }\r\n        });\r\n      });\r\n    },\r\n    _reqAnswer() {\r\n      POST_ASK_ANSWER(this.question_id, this.content).then(res => {\r\n        handleResponse(res, () => {\r\n          this._reqDetail();\r\n          Toast.success(\"回答成功\");\r\n          this.content = \"\";\r\n        });\r\n      });\r\n    },\r\n    _reqModifyQues() {\r\n      POST_ASK_MODIFYQUES(\r\n        this.question_id,\r\n        this.popTitle,\r\n        this.popContent\r\n      ).then(res => {\r\n        handleResponse(res, () => {\r\n          this.details.title = this.popTitle;\r\n          this.details.description = this.popContent;\r\n          this.showPopup = false;\r\n          Toast.success(\"修改成功\");\r\n        });\r\n      });\r\n    },\r\n    _reqModifyAnswer() {\r\n      POST_ASK_MODIFYANSWER(this.answer_id, this.popContent).then(res => {\r\n        handleResponse(res, () => {\r\n          this.normalAnser[this.itemIndex].content = this.popContent;\r\n          this.showPopup = false;\r\n          Toast.success(\"修改成功\");\r\n        });\r\n      });\r\n    },\r\n    _reqAdopy() {\r\n      GET_ASK_ADOPT(this.answer_id, this.question_id).then(res => {\r\n        handleResponse(res, () => {\r\n          this._reqDetail();\r\n          Toast.success(\"修改成功\");\r\n        });\r\n      });\r\n    },\r\n    _reqReply() {\r\n      POST_ASK_REPLY(this.answer_id, this.content).then(res => {\r\n        handleResponse(res, () => {\r\n          this._reqDetail();\r\n          Toast.success(\"回复成功\");\r\n          this.content = \"\";\r\n        });\r\n      });\r\n    },\r\n    // 查看数量 +1 接口\r\n    _reqWatchNum() {\r\n      POST_ASK_WATCHNUM(this.question_id);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.details {\r\n  .popup {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #20232a;\r\n  }\r\n  .scroll-box {\r\n    position: fixed;\r\n    top: 41px;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n  }\r\n  .ques-data {\r\n    padding: 0 1rem;\r\n    margin-bottom: 4rem;\r\n    h2 {\r\n      font-size: 1.1rem;\r\n      margin-bottom: 0.8rem;\r\n      line-height: 24px;\r\n      color: #e7bb70;\r\n    }\r\n    .data {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      font-size: 0.8rem;\r\n      margin-bottom: 0.8rem;\r\n    }\r\n    p {\r\n      line-height: 20px;\r\n    }\r\n    .border {\r\n      margin-bottom: 0.8rem;\r\n    }\r\n  }\r\n  .best-answer {\r\n    padding: 0 1rem;\r\n    margin-bottom: 2rem;\r\n    .title {\r\n      width: 7rem;\r\n      height: 2.4rem;\r\n      line-height: 2.4rem;\r\n      margin-bottom: 1rem;\r\n      background-color: #e7bb70;\r\n      color: #fff;\r\n      text-align: center;\r\n    }\r\n    .contents {\r\n      line-height: 20px;\r\n      margin-bottom: 1rem;\r\n    }\r\n    .infor {\r\n      display: flex;\r\n      img {\r\n        width: 50px;\r\n        height: 50px;\r\n        margin-right: 1rem;\r\n      }\r\n      > div {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-around;\r\n        span:last-child {\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .other-answer {\r\n    padding: 0 1rem;\r\n    padding-bottom: 1.4rem;\r\n    border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n    .title {\r\n      display: flex;\r\n      height: 4rem;\r\n      line-height: 4rem;\r\n      justify-content: space-between;\r\n      > span {\r\n        color: #ff8d64;\r\n      }\r\n      > div {\r\n        span {\r\n          margin-left: 1rem;\r\n          color: #4ac49d;\r\n        }\r\n      }\r\n    }\r\n    .contents {\r\n      line-height: 20px;\r\n      margin-bottom: 1rem;\r\n    }\r\n    .infor {\r\n      display: flex;\r\n      align-items: center;\r\n      img {\r\n        width: 30px;\r\n        height: 30px;\r\n        border-radius: 100%;\r\n      }\r\n      span {\r\n        margin-left: 1rem;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n    .reply {\r\n      padding-top: 1rem;\r\n      font-size: 12px;\r\n      p {\r\n        line-height: 24px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n.details {\r\n  .answer-dialog{\r\n    .van-cell__title{\r\n      color: #666;\r\n    }\r\n    .van-field__control{\r\n      color: #666;\r\n    }\r\n  }\r\n  .van-cell {\r\n    color: #333;\r\n  }\r\n  .van-dialog__header {\r\n    padding: 15px 0;\r\n  }\r\n  .popup .van-cell-group {\r\n    background-color: transparent;\r\n  }\r\n  .popup .van-cell {\r\n    background-color: transparent;\r\n  }\r\n  .popup .van-field .van-cell__title {\r\n    color: rgba(255, 255, 255, 0.8);\r\n  }\r\n  .popup .van-field__control {\r\n    color: rgba(255, 255, 255, 0.8);\r\n  }\r\n  .van-dialog__header {\r\n    color: #666;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/details/details.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"details\"},[_c('van-dialog',{staticClass:\"answer-dialog\",attrs:{\"show-cancel-button\":\"\",\"closeOnClickOverlay\":\"\"},on:{\"cancel\":_vm.handleAnswerAndReplyCancel,\"confirm\":_vm.handleAnswerAndReplyConfirm},model:{value:(_vm.showAnswerDialog),callback:function ($$v) {_vm.showAnswerDialog=$$v},expression:\"showAnswerDialog\"}},[_c('van-field',{attrs:{\"label\":\"内容\",\"type\":\"textarea\",\"rows\":\"1\",\"placeholder\":\"请输入\"},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1),_vm._v(\" \"),_c('van-popup',{staticClass:\"popup\",attrs:{\"position\":\"right\",\"overlay\":false},model:{value:(_vm.showPopup),callback:function ($$v) {_vm.showPopup=$$v},expression:\"showPopup\"}},[_c('header-main',{attrs:{\"path\":\"path\",\"title\":_vm.popupTitle},on:{\"back\":_vm.handlePopupBack}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('van-cell-group',{attrs:{\"border\":false}},[(_vm.type === 'question')?_c('van-field',{attrs:{\"label\":\"标题\",\"clearable\":\"\",\"type\":\"textarea\",\"rows\":\"2\",\"autosize\":\"\",\"border\":false},model:{value:(_vm.popTitle),callback:function ($$v) {_vm.popTitle=$$v},expression:\"popTitle\"}}):_vm._e(),_vm._v(\" \"),(_vm.type === 'question')?_c('div',{staticClass:\"border\"}):_vm._e(),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":_vm.popupLable,\"clearable\":\"\",\"type\":\"textarea\",\"rows\":\"3\",\"border\":false,\"autosize\":\"\"},model:{value:(_vm.popContent),callback:function ($$v) {_vm.popContent=$$v},expression:\"popContent\"}}),_vm._v(\" \"),_c('div',{staticClass:\"border\"})],1),_vm._v(\" \"),_c('a',{staticClass:\"submit-btn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.handleSubmitModify}},[_vm._v(\"提交修改\")])],1),_vm._v(\" \"),_c('header-main',{attrs:{\"title\":\"问题详情\"}}),_vm._v(\" \"),_c('div',{staticClass:\"scroll-box\"},[_c('scroll',[_c('br'),_vm._v(\" \"),_c('div',{staticClass:\"ques-data\"},[_c('h2',[_vm._v(_vm._s(_vm.details.title))]),_vm._v(\" \"),_c('div',{staticClass:\"border\"}),_vm._v(\" \"),_c('div',{staticClass:\"data\"},[_c('span',[_vm._v(_vm._s(_vm.details.from.nickname)+\" 提问于 \"+_vm._s(_vm.details.create_time))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.details.cate.cate_name))])]),_vm._v(\" \"),_c('div',{staticClass:\"border\"}),_vm._v(\" \"),_c('p',[_vm._v(\"问题补充：\"+_vm._s(_vm.details.description))]),_vm._v(\" \"),(_vm.details.nowUserId === _vm.details.user_id)?_c('a',{staticClass:\"submit-btn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){$event.preventDefault();return _vm.handleModifyQues('question', _vm.details.title, _vm.details.description)}}},[_vm._v(\"修改问题\")]):_c('a',{staticClass:\"submit-btn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){$event.preventDefault();return _vm.handleAnswerClick($event)}}},[_vm._v(\"我来回答\")])]),_vm._v(\" \"),(_vm.bestAnswer.state)?_c('div',{staticClass:\"best-answer\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"最佳答案\")]),_vm._v(\" \"),_c('div',{staticClass:\"contents\"},[_vm._v(_vm._s(_vm.bestAnswer.content))]),_vm._v(\" \"),_c('div',{staticClass:\"infor\"},[_c('img',{attrs:{\"src\":_vm.bestAnswer.from[0].avatar,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',[_c('span',[_vm._v(\"回答者：\"+_vm._s(_vm.bestAnswer.from[0].nickname))]),_vm._v(\" \"),_c('span',[_vm._v(\"回答时间：\"+_vm._s(_vm.bestAnswer.answer_time))])])])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"border\"}),_vm._v(\" \"),_vm._l((_vm.normalAnser),function(item,index){return _c('div',{key:index,staticClass:\"other-answer\"},[_c('div',{staticClass:\"title\"},[_c('span',[_vm._v(\"其它回答\")]),_vm._v(\" \"),_c('div',[(_vm.details.nowUserId === item.user_id)?_c('span',{on:{\"click\":function($event){return _vm.handleModifyAnswer('answer', item.answer_id, item.content, index)}}},[_vm._v(\"修改\")]):_vm._e(),_vm._v(\" \"),(_vm.details.nowUserId === _vm.details.user_id && !_vm.bestAnswer.state)?_c('span',{on:{\"click\":function($event){return _vm.handleAdoptClick(index, item)}}},[_vm._v(\"采纳\")]):_vm._e(),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){return _vm.handleReplyClick(item.answer_id)}}},[_vm._v(\"回复\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"contents\"},[_vm._v(_vm._s(item.content))]),_vm._v(\" \"),_c('div',{staticClass:\"infor\"},[_c('img',{attrs:{\"src\":item.from[0].avatar,\"alt\":\"\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.from[0].nickname))]),_vm._v(\" \"),_c('span',[_vm._v(\"|\")]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(item.answer_time))])]),_vm._v(\" \"),(item.replys.length)?_c('div',{staticClass:\"reply\"},_vm._l((item.replys),function(reply,index){return _c('p',{key:index},[_vm._v(_vm._s(index + 1)+\"# \"+_vm._s(reply.user_id)+\" 回复说：\"+_vm._s(reply.reply_content))])}),0):_vm._e()])}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br')],2)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-39111214\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/details/details.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-39111214\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./details.vue\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-39111214\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=1!./details.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./details.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./details.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-39111214\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./details.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-39111214\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/details/details.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}